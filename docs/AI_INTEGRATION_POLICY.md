# AI 통합 정책 및 요구사항 검토
## AI 면접 질문 생성 및 답변 첨삭 시스템

**검토일**: 2025년 8월 13일  
**승인자**: PM  
**상태**: 🟢 **승인됨 - 구현 진행**

---

## 📋 요구사항 분석

### 1. **AI 기반 질문 생성 시스템**
**현재**: Mock 질문 165개 사용  
**변경**: 실시간 AI 질문 생성

#### 요구사항
- 직무 선택 시 해당 직무 관련 최신 면접 질문 10개 생성
- 질문 큐 시스템: 10개 저장 → 하나씩 사용 → 소진 시 새로 10개 생성
- 2024-2025년 최신 트렌드 반영

#### 비즈니스 장점
- ✅ 최신 면접 트렌드 반영
- ✅ 무한한 질문 다양성
- ✅ 직무별 맞춤화된 질문
- ✅ 사용자 재방문 유도

### 2. **AI 기반 답변 첨삭 시스템**
**현재**: Mock 분석 알고리즘  
**변경**: 실시간 AI 첨삭

#### 요구사항
- 질문 + 답변을 AI에게 전송
- 체계적인 점수 및 피드백 제공
- 현재 템플릿 유지하며 AI 응답 적용
- AI 피드백 품질 평가 시스템 추가

#### 비즈니스 장점
- ✅ 정교한 개인 맞춤 피드백
- ✅ 실시간 답변 개선 제안
- ✅ 전문적인 평가 기준
- ✅ 사용자 만족도 향상

---

## 💰 비용 분석 및 관리

### Google Gemini 비용 구조
- **Gemini 1.5 Flash**: 입력 $0.075/1M 토큰, 출력 $0.30/1M 토큰
- **Gemini 1.5 Pro**: 입력 $1.25/1M 토큰, 출력 $5.00/1M 토큰

### 예상 사용량 (일일 100명 기준)
#### 질문 생성
- 10개 질문/요청 × 평균 100 토큰/질문 = 1,000 토큰
- 사용자당 평균 2회 요청 = 2,000 토큰/사용자
- 일일 총 비용: 100명 × 2,000 토큰 × $0.075/1M = **$0.015/일**

#### 답변 첨삭
- 평균 입력: 500 토큰 (질문 + 답변)
- 평균 출력: 300 토큰 (피드백)
- 사용자당 평균 3개 답변 = 2,400 토큰/사용자
- 일일 총 비용: 100명 × 2,400 토큰 × $0.30/1M = **$0.072/일**

### **총 예상 비용: $0.087/일 (월 $2.6)**

---

## 🛡️ 사용량 제한 정책

### Tier 1: 무료 사용자 (기본)
- **일일 제한**: 질문 생성 5회, 답변 첨삭 10회
- **시간당 제한**: 질문 생성 2회, 답변 첨삭 5회
- **월별 제한**: 질문 생성 100회, 답변 첨삭 200회

### Tier 2: 프리미엄 (향후)
- **일일 제한**: 질문 생성 20회, 답변 첨삭 50회
- **추가 기능**: 맞춤형 질문, 상세 첨삭

### Rate Limiting 구현
```typescript
// 사용자별 제한
interface RateLimit {
  questionGeneration: { daily: 5, hourly: 2 }
  answerAnalysis: { daily: 10, hourly: 5 }
}
```

---

## 🔄 시스템 아키텍처

### 1. **질문 큐 시스템**
```
직무 선택 → AI 질문 10개 생성 → Queue 저장 → 하나씩 소비
              ↑                                    ↓
            Queue < 3개시 새로 생성 ← 질문 소진 확인
```

### 2. **캐싱 전략**
- **질문 캐싱**: 동일 직무 30분 캐시
- **사용자 세션**: 큐 상태 로컬 저장
- **중복 방지**: 이미 본 질문 제외

### 3. **에러 처리 및 Fallback**
```
AI API 요청 → 실패시 재시도 (3회) → 최종 실패시 Mock 데이터 사용
```

---

## 🎯 질문 품질 관리

### AI 프롬프트 템플릿
```
당신은 {직무} 분야의 전문 면접관입니다.
2024-2025년 현재 트렌드에 맞는 실제적인 면접 질문 10개를 생성해주세요.

조건:
1. 실무 경험을 평가할 수 있는 구체적인 질문
2. 해당 직무의 핵심 역량을 다루는 질문
3. 최신 기술/트렌드가 반영된 질문
4. 난이도: 초급 3개, 중급 5개, 고급 2개

형식: JSON 배열로 반환
[{"question": "질문 내용", "difficulty": "easy|medium|hard", "category": "{직무}"}]
```

### 품질 검증
- **길이 제한**: 질문당 15-150자
- **중복 검사**: 기존 질문과 유사도 체크
- **난이도 분포**: 초급:중급:고급 = 3:5:2

---

## 📊 AI 피드백 평가 시스템

### 현재 평가 기준 유지
- 질문 이해도 (25점)
- 논리적 구성 (25점)
- 구체성 (25점)
- 직무 적합성 (25점)

### 추가: AI 피드백 품질 평가
```
사용자가 AI 피드백에 대해 평가할 수 있는 시스템:
👍 도움됨 / 👎 도움 안됨 / 💭 더 구체적으로
```

### AI 첨삭 프롬프트 템플릿
```
면접 질문과 답변을 전문적으로 평가해주세요.

질문: {질문}
답변: {답변}
직무: {직무}

다음 기준으로 25점씩 평가:
1. 질문 이해도: 질문의 핵심을 정확히 파악했는가
2. 논리적 구성: 답변이 체계적으로 구성되었는가  
3. 구체성: 구체적인 경험과 사례가 포함되었는가
4. 직무 적합성: 해당 직무와 연관성이 있는가

JSON 형식으로 응답:
{
  "scores": {"understanding": 점수, "logic": 점수, "specificity": 점수, "relevance": 점수},
  "totalScore": 총점,
  "strengths": ["잘한점1", "잘한점2"],
  "improvements": ["개선점1", "개선점2"], 
  "feedback": "종합 피드백",
  "idealAnswer": "모범 답변 예시"
}
```

---

## ⚠️ 리스크 및 대응방안

### 기술적 리스크
| 리스크 | 확률 | 영향도 | 대응방안 |
|--------|------|--------|----------|
| API 장애 | 중 | 높음 | Mock 데이터 Fallback |
| 비용 초과 | 중 | 중 | 사용량 제한 + 알림 |
| 질문 품질 저하 | 낮음 | 중 | 품질 검증 + 사용자 피드백 |
| 응답 지연 | 중 | 낮음 | 타임아웃 + 로딩 UI |

### 비즈니스 리스크  
| 리스크 | 확률 | 영향도 | 대응방안 |
|--------|------|--------|----------|
| 사용자 급증으로 비용 폭증 | 중 | 높음 | 단계별 제한 + 프리미엄 |
| AI 피드백 부정확 | 낮음 | 중 | 사용자 평가 + 지속 개선 |

---

## 🚀 구현 계획

### Phase 1: 기본 AI 통합 (3일)
- ✅ Gemini API 설정 완료
- 🔲 질문 생성 API 구현
- 🔲 답변 첨삭 API 구현
- 🔲 기본 에러 처리

### Phase 2: 고급 기능 (2일)
- 🔲 질문 큐 시스템
- 🔲 사용량 제한
- 🔲 캐싱 시스템
- 🔲 AI 피드백 평가

### Phase 3: 최적화 (1일)
- 🔲 성능 튜닝
- 🔲 비용 모니터링
- 🔲 품질 검증
- 🔲 사용자 테스트

---

## 👥 팀 할당

### Frontend Team
- 질문 큐 UI 상태 관리
- AI 로딩 상태 개선
- 피드백 평가 UI 추가

### Backend Team  
- Gemini API 통합
- 사용량 제한 시스템
- 질문 캐싱 로직

### QA Team
- AI 통합 테스트
- 비용 모니터링 테스트
- 사용자 시나리오 검증

---

## ✅ 승인 결정

### 정책 검토 결과: **승인**

**승인 이유:**
1. **비용 효율성**: 월 $3 이하로 매우 저렴
2. **사용자 가치**: 맞춤형 최신 질문 + 전문 첨삭
3. **기술 안정성**: Fallback 시스템으로 위험 최소화
4. **확장 가능성**: 프리미엄 모델로 수익화 가능

**조건:**
- 사용량 제한 필수 구현
- 비용 모니터링 시스템 구축  
- 품질 검증 프로세스 도입

**다음 단계**: Sub-agents 작업 할당 및 구현 진행

---

## 📞 연락처

**PM**: 정책 및 전체 진행 관리  
**Frontend Lead**: UI/UX 구현 문의  
**Backend Lead**: API 통합 기술 문의  
**QA Lead**: 테스트 및 품질 문의

---

*이 정책은 AI 통합의 안전하고 효율적인 구현을 위한 종합적인 가이드라인입니다.*